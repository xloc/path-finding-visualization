(this.webpackJsonpa1=this.webpackJsonpa1||[]).push([[0],{94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),a=n.n(r),i=n(9),o=n.n(i),s=n(14),l=n(6),u=n(47),j=n.n(u),f=n(122),d=n(137),b=n(123),O=n(135),h=n(134),v=n(128),p=n(129),m=n(130),x=n(131),g=n(132),y=n(133),w=n(121),N=Object(w.a)({palette:{primary:{main:"#203040"},secondary:{main:"#abc"}}}),I=(n(94),n(38)),D=(n(95),["#ff6347","#92da26","#4682b4","#F4A460","#dda0dd","#6a5acd","#00ff7f"]);function k(e){var t=Array(e.size.row).fill(null).map((function(t,n){return Array(e.size.col).fill(null).map((function(e,t){return{isWall:!1,isPin:!1,netID:-1}}))}));return e.walls.forEach((function(e){var n=Object(l.a)(e,2),c=n[0],r=n[1];t[c][r].isWall=!0})),e.nets.forEach((function(e){e.pins.forEach((function(n){var c=Object(l.a)(n,2),r=c[0],a=c[1];t[r][a].isPin=!0,t[r][a].netID=e.netID}))})),t}function S(e){var t=e.routeMap,n=e.routeResult,a=Object(r.useState)((function(){return k(t)})),i=Object(l.a)(a,2),o=i[0],s=i[1];return Object(r.useEffect)((function(){s(k(t))}),[t]),Object(c.jsx)("div",{children:o.map((function(e,t){return Object(c.jsx)("div",{className:"grid-row",children:e.map((function(e,r){return Object(c.jsx)(E,{mapCell:e,routeResultCell:null===n||void 0===n?void 0:n.grid[t][r]},"grid-cell ".concat(t," ").concat(r))}))},"grid-row ".concat(t))}))})}function E(e){var t=e.mapCell,n=e.routeResultCell,r="#ccc";return t.isWall?r="black":t.isPin&&(r=D[t.netID]),n&&-1!==n.netId&&(r=D[n.netId]),Object(c.jsx)("div",{className:"grid-cell",style:{backgroundColor:r},children:Object(c.jsx)("div",{className:t.isPin?"pin":""})})}var C,z=n(39);!function(e){e[e.void=0]="void",e[e.wall=1]="wall",e[e.pin=2]="pin"}(C||(C={}));var P,F=n(45),A=function e(t,n){Object(I.a)(this,e),this.grid=void 0,this.size=void 0,this.size=t,this.grid=Array(t.row).fill(null).map((function(e,c){return Array(t.col).fill(null).map((function(e,t){return n(c,t)}))}))};function H(e,t){return[[e+1,t],[e-1,t],[e,t+1],[e,t-1]]}function R(e,t,n){for(var c=e.size,r=c.col,a=c.row,i=new A(e.size,(function(e,t){return-1})),o=function(e,t){return e>=0&&e<a&&t>=0&&t<r},s=function(t,n){return o(t,n)&&!e.grid[t][n]&&-1===i.grid[t][n]},u=t,j=0,f=null;u.length>0;){var d,b=[],O=Object(F.a)(u);try{for(O.s();!(d=O.n()).done;){var h=Object(l.a)(d.value,2),v=h[0],p=h[1];i.grid[v][p]=j}}catch(M){O.e(M)}finally{O.f()}var m,x=Object(F.a)(u);try{for(x.s();!(m=x.n()).done;){var g,y=Object(l.a)(m.value,2),w=y[0],N=y[1],I=Object(F.a)(H(w,N));try{for(I.s();!(g=I.n()).done;){var D=Object(l.a)(g.value,2),k=D[0],S=D[1];s(k,S)&&(b.push([k,S]),i.grid[k][S]=-2,n.grid[k][S]&&(f=[k,S]))}}catch(M){I.e(M)}finally{I.f()}}}catch(M){x.e(M)}finally{x.f()}f?u=[]:(u=b,j++)}if(!f)return{succeed:!1};for(var E=j,C=f,z=Object(l.a)(C,2),P=z[0],R=z[1],W=E,q=[];;){var B=Object(l.a)(H(P,R).filter((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];return o(n,c)&&i.grid[n][c]===W}))[0],2);if(P=B[0],R=B[1],0===i.grid[P][R])break;q.push([P,R]),W--}return{succeed:!0,segments:q,connectedPin:f}}function W(e,t){for(var n=Object(z.a)(t.pins),c=n[0],r=n.slice(1),a=[c],i=function(e,t){var n=new A(e,(function(e,t){return!1}));return t.forEach((function(e){var t=Object(l.a)(e,2),c=t[0],r=t[1];n.grid[c][r]=!0})),n}(e.size,r),o=r.length;o>0;){var u=R(e,a,i);if(!u.succeed)break;var j=u;o-=1,a=[].concat(Object(s.a)(a),Object(s.a)(j.segments),[j.connectedPin]);var f=Object(l.a)(j.connectedPin,2),d=f[0],b=f[1];i.grid[d][b]=!1}return o>0?{succeed:!1}:{succeed:!0,connection:{netID:t.netID,segments:a}}}function q(e,t,n){var c=new A(e.size,(function(e,t){return!1}));return e.walls.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];c.grid[n][r]=!0})),e.nets.filter((function(e){return e.netID!==t})).forEach((function(e){e.pins.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];c.grid[n][r]=!0}))})),n.forEach((function(e){e.segments.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];c.grid[n][r]=!0}))})),c}!function(e){e[e.Succeed=0]="Succeed",e[e.FailNet=1]="FailNet",e[e.FailAll=2]="FailAll"}(P||(P={}));n(96);var B=n(136);function M(e){var t=e.result,n=Object(B.a)();return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"history-list",children:[t.connectionHistory.map((function(e,t){return Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:D[e.netID]}},"".concat(n," ").concat(t))})),Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:D[t.newConnection.netID]}})]})})}function J(e){var t=e.result,n=Object(B.a)();return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"history-list",children:[t.connectionHistory.map((function(e,t){return Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:D[e.netID]}},"".concat(n," ").concat(t))})),Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:D[t.failedNet.netID]}})]})})}function G(e){var t=e.result,n=Object(B.a)();return Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"history-list",children:t.connectionHistory.map((function(e,t){return Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:D[e.netID]}},"".concat(n," ").concat(t))}))})})}var K=n(125),L=n(126),Q=n(127),T=150;function U(e,t){var n=new A(e,(function(e,t){return{netId:-1}}));return t.forEach((function(e){e.segments.forEach((function(t){var c=Object(l.a)(t,2),r=c[0],a=c[1];n.grid[r][a].netId=e.netID}))})),n}var V=Object(f.a)((function(e){return Object(d.a)({root:{display:"flex"},appBar:{width:"calc(100% - ".concat(T,"px - ").concat(150,"px)"),left:T},circuitDrawer:{width:T,flexShrink:0},circuitDrawerPaper:{width:T},historyDrawer:{width:150},historyDrawerPaper:{width:150,flexShrink:0},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}})}));var X=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),o=Object(l.a)(i,2),u=o[0],f=o[1],d=V(),w=Object(r.useState)(),I=Object(l.a)(w,2),D=I[0],k=I[1];Object(r.useEffect)((function(){return j.a.get("benchmarks/infiles.json").then((function(e){k(e.data)})),function(){}}),[]);var E=Object(r.useState)("impossible.infile"),C=Object(l.a)(E,2),F=C[0],A=C[1];Object(r.useEffect)((function(){""!==F&&j.a.get("benchmarks/".concat(F)).then((function(e){f(function(e){var t=e.split("\n"),n=t[0].split(" ").map((function(e){return parseInt(e)})),c=Object(l.a)(n,2),r=c[0],a=c[1],i=1,o=parseInt(t[i++]),s=t.slice(i,i+o).map((function(e){var t=e.split(" ").map((function(e){return parseInt(e)})),n=Object(l.a)(t,2),c=n[0];return[n[1],c]}));i+=o;var u=[],j=parseInt(t[i++]);return t.slice(i,i+j).forEach((function(e,t){for(var n=e.trim().split(" ").map((function(e){return parseInt(e)})),c=Object(z.a)(n).slice(1),r={netID:t,pins:[]},a=0;a<c.length;a+=2){var i=c[a],o=c[a+1];r.pins.push([o,i])}u.push(r)})),{size:{col:r,row:a},walls:s,nets:u}}(e.data))}))}),[F]);var H=Object(c.jsx)(b.a,{children:null===D||void 0===D?void 0:D.map((function(e){return Object(c.jsx)(O.a,{button:!0,onClick:function(){return A(e)},selected:e===F,children:e.split(".")[0]},e)}))}),R=Object(r.useState)([]),B=Object(l.a)(R,2),T=B[0],X=B[1],Y=function(e){X((function(t){return t.length>100?t:[].concat(Object(s.a)(t),[e])}))};Object(r.useEffect)((function(){if(u){X([]);var e=function(e,t){return function n(c,r){if(0===c.length)return{succeed:!0,netRouteSequence:[],connections:[]};for(var a=0;a<c.length;a++){var i=c[a],o=W(q(e,a,r),i);if(o.succeed){var l=o;t({type:P.Succeed,connectionHistory:r,newConnection:l.connection});var u=n([].concat(Object(s.a)(c.slice(0,a)),Object(s.a)(c.slice(a+1))),[].concat(Object(s.a)(r),[l.connection]));if(u.succeed){var j=u;return{succeed:!0,netRouteSequence:[i].concat(Object(s.a)(j.netRouteSequence)),connections:[l.connection].concat(Object(s.a)(j.connections))}}}else t({type:P.FailNet,connectionHistory:r,failedNet:i})}return t({type:P.FailAll,connectionHistory:r}),{succeed:!1}}(e.nets,[])}(u,Y);if(e.succeed){var t=e;console.log(t);var n=U(u.size,t.connections);a(n)}else a(void 0)}}),[u]);var Z=Object(c.jsx)(b.a,{children:T.map((function(e,t){switch(e.type){case P.Succeed:var n=e;return Object(c.jsxs)(O.a,{button:!0,onClick:function(){if(u){var e=U(u.size,[].concat(Object(s.a)(n.connectionHistory),[n.newConnection]));a(e)}},children:[Object(c.jsx)(h.a,{color:"success.main",className:"icon-alignment",children:Object(c.jsx)(K.a,{fontSize:"small"})}),Object(c.jsx)(M,{result:e})]},"history ".concat(t));case P.FailNet:return Object(c.jsxs)(O.a,{button:!0,children:[Object(c.jsx)(h.a,{color:"error.main",className:"icon-alignment",children:Object(c.jsx)(L.a,{fontSize:"small"})}),Object(c.jsx)(J,{result:e})]},"history ".concat(t));case P.FailAll:return Object(c.jsxs)(O.a,{button:!0,children:[Object(c.jsx)(h.a,{color:"error.main",className:"icon-alignment",children:Object(c.jsx)(Q.a,{fontSize:"small"})}),Object(c.jsx)(G,{result:e})]},"history ".concat(t));default:return"0"}}))});return Object(c.jsxs)("div",{className:d.root,children:[Object(c.jsx)(v.a,{}),Object(c.jsxs)(p.a,{theme:N,children:[Object(c.jsx)(m.a,{position:"fixed",className:d.appBar,children:Object(c.jsxs)(x.a,{children:[" ",Object(c.jsx)(g.a,{variant:"h6",noWrap:!0,children:F})]})}),Object(c.jsx)(y.a,{open:!0,variant:"permanent",className:d.circuitDrawer,classes:{paper:d.circuitDrawerPaper},children:H}),Object(c.jsxs)("main",{className:d.content,children:[Object(c.jsx)("div",{className:d.toolbar}),u?Object(c.jsx)(S,{routeMap:u,routeResult:n}):Object(c.jsx)(c.Fragment,{})]}),Object(c.jsx)(y.a,{open:!0,variant:"permanent",className:d.historyDrawer,classes:{paper:d.historyDrawerPaper},anchor:"right",children:Z})]})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(X,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.2fdd795e.chunk.js.map