(this.webpackJsonpa1=this.webpackJsonpa1||[]).push([[0],{88:function(e,n,t){},89:function(e,n,t){},91:function(e,n,t){"use strict";t.r(n);var c=t(10),r=t(0),a=t.n(r),i=t(7),o=t.n(i),u=t(9),s=t(44),f=t.n(s),l=t(120),d=t(121),j=t(124),b=t(125),v=t(126),O=t(119),h=Object(O.a)({palette:{primary:{main:"#203040"},secondary:{main:"#abc"}}}),p=(t(88),t(34));t(89);function g(e){var n=Array(e.size.row).fill(null).map((function(n,t){return Array(e.size.col).fill(null).map((function(e,n){return{isWall:!1,isPin:!1,netID:-1}}))}));return e.walls.forEach((function(e){var t=Object(u.a)(e,2),c=t[0],r=t[1];n[c][r].isWall=!0})),e.nets.forEach((function(e){e.pins.forEach((function(t){var c=Object(u.a)(t,2),r=c[0],a=c[1];n[r][a].isPin=!0,n[r][a].netID=e.netID}))})),n}function m(e){var n=e.routeMap,t=e.routeResult,a=Object(r.useState)((function(){return g(n)})),i=Object(u.a)(a,2),o=i[0],s=i[1];return Object(r.useEffect)((function(){s(g(n))}),[n]),Object(c.jsx)("div",{children:o.map((function(e,n){return Object(c.jsx)("div",{className:"grid-row",children:e.map((function(e,r){return Object(c.jsx)(I,{mapCell:e,routeResultCell:null===t||void 0===t?void 0:t.grid[n][r]},"grid-cell ".concat(n," ").concat(r))}))},"grid-row ".concat(n))}))})}var w=["#ff6347","#adff2f","#4682b4","#F4A460","#dda0dd","#6a5acd","#00ff7f"];function I(e){var n=e.mapCell,t=e.routeResultCell,r="#ccc";return n.isWall?r="black":n.isPin&&(r=w[n.netID]),t&&-1!==t.netId&&(r=w[t.netId]),Object(c.jsx)("div",{className:"grid-cell",style:{backgroundColor:r}})}var E,x=t(35);!function(e){e[e.void=0]="void",e[e.wall=1]="wall",e[e.pin=2]="pin"}(E||(E={}));var y=t(19),z=t(41),k=function e(n,t){Object(p.a)(this,e),this.grid=void 0,this.size=void 0,this.size=n,this.grid=Array(n.row).fill(null).map((function(e,c){return Array(n.col).fill(null).map((function(e,n){return t(c,n)}))}))};function D(e,n){return[[e+1,n],[e-1,n],[e,n+1],[e,n-1]]}function S(e,n,t){for(var c=e.size,r=c.col,a=c.row,i=new k(e.size,(function(e,n){return-1})),o=function(e,n){return e>=0&&e<a&&n>=0&&n<r},s=function(n,t){return o(n,t)&&!e.grid[n][t]&&-1===i.grid[n][t]},f=n,l=0,d=null;f.length>0;){var j,b=[],v=Object(z.a)(f);try{for(v.s();!(j=v.n()).done;){var O=Object(u.a)(j.value,2),h=O[0],p=O[1];i.grid[h][p]=l}}catch(B){v.e(B)}finally{v.f()}var g,m=Object(z.a)(f);try{for(m.s();!(g=m.n()).done;){var w,I=Object(u.a)(g.value,2),E=I[0],x=I[1],y=Object(z.a)(D(E,x));try{for(y.s();!(w=y.n()).done;){var S=Object(u.a)(w.value,2),C=S[0],R=S[1];s(C,R)&&(b.push([C,R]),i.grid[C][R]=-2,t.grid[C][R]&&(d=[C,R]))}}catch(B){y.e(B)}finally{y.f()}}}catch(B){m.e(B)}finally{m.f()}d?f=[]:(f=b,l++)}if(!d)return{succeed:!1};for(var P=l,A=d,q=Object(u.a)(A,2),M=q[0],N=q[1],W=P,F=[];;){var J=Object(u.a)(D(M,N).filter((function(e){var n=Object(u.a)(e,2),t=n[0],c=n[1];return o(t,c)&&i.grid[t][c]===W}))[0],2);if(M=J[0],N=J[1],0===i.grid[M][N])break;F.push([M,N]),W--}return{succeed:!0,segments:F,connectedPin:d}}function C(e,n){for(var t=Object(x.a)(n.pins),c=t[0],r=t.slice(1),a=[c],i=function(e,n){var t=new k(e,(function(e,n){return!1}));return n.forEach((function(e){var n=Object(u.a)(e,2),c=n[0],r=n[1];t.grid[c][r]=!0})),t}(e.size,r),o=r.length;o>0;){var s=S(e,a,i);if(!s.succeed)break;var f=s;o-=1,a=[].concat(Object(y.a)(a),Object(y.a)(f.segments),[f.connectedPin]);var l=Object(u.a)(f.connectedPin,2),d=l[0],j=l[1];i.grid[d][j]=!1}return o>0?{succeed:!1}:{succeed:!0,connection:{netID:n.netID,segments:a}}}function R(e,n,t){var c=new k(e.size,(function(e,n){return!1}));return e.walls.forEach((function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];c.grid[t][r]=!0})),e.nets.filter((function(e){return e.netID!==n})).forEach((function(e){e.pins.forEach((function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];c.grid[t][r]=!0}))})),t.forEach((function(e){e.segments.forEach((function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];c.grid[t][r]=!0}))})),c}var P=function(){var e=Object(r.useState)(),n=Object(u.a)(e,2),t=n[0],a=n[1],i=Object(r.useState)(),o=Object(u.a)(i,2),s=o[0],O=o[1];Object(r.useEffect)((function(){if(s){var e=function(e){return function n(t,c){if(0===t.length)return{succeed:!0,netRouteSequence:[],connections:[]};for(var r=0;r<t.length;r++){var a=t[r],i=C(R(e,r,c),a);if(!i.succeed)return{succeed:!1};var o=i,u=n([].concat(Object(y.a)(t.slice(0,r)),Object(y.a)(t.slice(r+1))),[].concat(Object(y.a)(c),[o.connection]));if(u.succeed){var s=u;return{succeed:!0,netRouteSequence:[a].concat(Object(y.a)(s.netRouteSequence)),connections:[o.connection].concat(Object(y.a)(s.connections))}}}return{succeed:!1}}(e.nets,[])}(s);if(e.succeed){var n=e;console.log(n);var t=new k(s.size,(function(e,n){return{netId:-1}}));n.connections.forEach((function(e){e.segments.forEach((function(n){var c=Object(u.a)(n,2),r=c[0],a=c[1];t.grid[r][a].netId=e.netID}))})),a(t)}else a(void 0)}}),[s]);var p=Object(r.useState)(),g=Object(u.a)(p,2),w=g[0],I=g[1];Object(r.useEffect)((function(){return f.a.get("benchmarks/infiles.json").then((function(e){I(e.data)})),function(){}}),[]);var E=Object(r.useState)("impossible.infile"),z=Object(u.a)(E,2),D=z[0],S=z[1];return Object(r.useEffect)((function(){""!==D&&f.a.get("benchmarks/".concat(D)).then((function(e){O(function(e){var n=e.split("\n"),t=n[0].split(" ").map((function(e){return parseInt(e)})),c=Object(u.a)(t,2),r=c[0],a=c[1],i=1,o=parseInt(n[i++]),s=n.slice(i,i+o).map((function(e){var n=e.split(" ").map((function(e){return parseInt(e)})),t=Object(u.a)(n,2),c=t[0];return[t[1],c]}));i+=o;var f=[],l=parseInt(n[i++]);return n.slice(i,i+l).forEach((function(e,n){for(var t=e.trim().split(" ").map((function(e){return parseInt(e)})),c=Object(x.a)(t).slice(1),r={netID:n,pins:[]},a=0;a<c.length;a+=2){var i=c[a],o=c[a+1];r.pins.push([o,i])}f.push(r)})),{size:{col:r,row:a},walls:s,nets:f}}(e.data))}))}),[D]),Object(c.jsxs)(l.a,{theme:h,children:[Object(c.jsx)(d.a,{position:"static",children:Object(c.jsx)(j.a,{children:Object(c.jsx)(b.a,{style:{width:"8em",color:"white"},value:D,onChange:function(e){return S(e.target.value)},children:null===w||void 0===w?void 0:w.map((function(e){return Object(c.jsxs)(v.a,{value:e,children:[" ",e.split(".")[0]," "]},e)}))})})}),Object(c.jsxs)("div",{style:{margin:20},children:[s?Object(c.jsx)(m,{routeMap:s,routeResult:t}):Object(c.jsx)(c.Fragment,{}),Object(c.jsx)("button",{onClick:function(){},children:" Next "})]})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.2ffcfb44.chunk.js.map