(this.webpackJsonpa1=this.webpackJsonpa1||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(0),a=n.n(r),i=n(9),o=n.n(i),s=n(14),l=n(5),u=n(127),f=n(137),j=n(126),d=n(135),b=n(128),O=n(129),h=n(130),v=n(131),p=n(132),m=n(133),x=n(121),g=Object(x.a)({palette:{primary:{main:"#203040"},secondary:{main:"#abc"}}}),y=(n(76),n(38)),w=(n(77),["#ff6347","#92da26","#4682b4","#F4A460","#dda0dd","#6a5acd","#06D6A0","#106b3c"]);function N(e){var t=Array(e.size.row).fill(null).map((function(t,n){return Array(e.size.col).fill(null).map((function(e,t){return{isWall:!1,isPin:!1,netID:-1}}))}));return e.walls.forEach((function(e){var n=Object(l.a)(e,2),c=n[0],r=n[1];t[c][r].isWall=!0})),e.nets.forEach((function(e){e.pins.forEach((function(n){var c=Object(l.a)(n,2),r=c[0],a=c[1];t[r][a].isPin=!0,t[r][a].netID=e.netID}))})),t}function I(e){var t=e.routeMap,n=e.routeResult,a=Object(r.useState)((function(){return N(t)})),i=Object(l.a)(a,2),o=i[0],s=i[1];return Object(r.useEffect)((function(){s(N(t))}),[t]),Object(c.jsx)("div",{children:o.map((function(e,t){return Object(c.jsx)("div",{className:"grid-row",children:e.map((function(e,r){return Object(c.jsx)(D,{mapCell:e,routeResultCell:null===n||void 0===n?void 0:n.grid[t][r]},"grid-cell ".concat(t," ").concat(r))}))},"grid-row ".concat(t))}))})}function D(e){var t=e.mapCell,n=e.routeResultCell,r="#ccc";return t.isWall?r="black":t.isPin&&(r=w[t.netID]),n&&-1!==n.netId&&(r=w[n.netId]),Object(c.jsx)("div",{className:"grid-cell",style:{backgroundColor:r},children:Object(c.jsx)("div",{className:t.isPin?"pin":""})})}var S=n(122),k=n(124),E=n(125),C=n(134),z=(n(78),n(136));function F(e){var t=e.result,n=Object(z.a)();return Object(c.jsxs)("div",{className:"entry-row",children:[Object(c.jsx)(C.a,{color:"success.main",className:"icon-alignment",children:Object(c.jsx)(S.a,{fontSize:"small"})}),Object(c.jsxs)("div",{className:"history-list",children:[t.connectionHistory.map((function(e,t){return Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:w[e.netID]}},"".concat(n," ").concat(t))})),Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:w[t.newConnection.netID]}})]})]})}function A(e){var t=e.result,n=Object(z.a)();return Object(c.jsxs)("div",{className:"entry-row",children:[Object(c.jsx)(C.a,{color:"error.main",className:"icon-alignment",children:Object(c.jsx)(k.a,{fontSize:"small"})}),Object(c.jsxs)("div",{className:"history-list",children:[t.connectionHistory.map((function(e,t){return Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:w[e.netID]}},"".concat(n," ").concat(t))})),Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:w[t.failedNet.netID]}})]})]})}function P(e){var t=e.result,n=Object(z.a)();return Object(c.jsxs)("div",{className:"entry-row",children:[Object(c.jsx)(C.a,{color:"error.main",className:"icon-alignment",children:Object(c.jsx)(E.a,{fontSize:"small"})}),Object(c.jsx)("div",{className:"history-list",children:t.connectionHistory.map((function(e,t){return Object(c.jsx)("div",{className:"history-cell",style:{backgroundColor:w[e.netID]}},"".concat(n," ").concat(t))}))})]})}var H,R=function e(t,n){Object(y.a)(this,e),this.grid=void 0,this.size=void 0,this.size=t,this.grid=Array(t.row).fill(null).map((function(e,c){return Array(t.col).fill(null).map((function(e,t){return n(c,t)}))}))},M=n(42),W=n(45);function q(e,t){return[[e+1,t],[e-1,t],[e,t+1],[e,t-1]]}function B(e,t,n){for(var c=e.size,r=c.col,a=c.row,i=new R(e.size,(function(e,t){return-1})),o=function(e,t){return e>=0&&e<a&&t>=0&&t<r},s=function(t,n){return o(t,n)&&!e.grid[t][n]&&-1===i.grid[t][n]},u=t,f=0,j=null;u.length>0;){var d,b=[],O=Object(W.a)(u);try{for(O.s();!(d=O.n()).done;){var h=Object(l.a)(d.value,2),v=h[0],p=h[1];i.grid[v][p]=f}}catch(B){O.e(B)}finally{O.f()}var m,x=Object(W.a)(u);try{for(x.s();!(m=x.n()).done;){var g,y=Object(l.a)(m.value,2),w=y[0],N=y[1],I=Object(W.a)(q(w,N));try{for(I.s();!(g=I.n()).done;){var D=Object(l.a)(g.value,2),S=D[0],k=D[1];s(S,k)&&(b.push([S,k]),i.grid[S][k]=-2,n.grid[S][k]&&(j=[S,k]))}}catch(B){I.e(B)}finally{I.f()}}}catch(B){x.e(B)}finally{x.f()}j?u=[]:(u=b,f++)}if(!j)return{succeed:!1};for(var E=f,C=j,z=Object(l.a)(C,2),F=z[0],A=z[1],P=E,H=[];;){var M=Object(l.a)(q(F,A).filter((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];return o(n,c)&&i.grid[n][c]===P}))[0],2);if(F=M[0],A=M[1],0===i.grid[F][A])break;H.push([F,A]),P--}return{succeed:!0,segments:H,connectedPin:j}}function J(e,t){for(var n=Object(M.a)(t.pins),c=n[0],r=n.slice(1),a=[c],i=function(e,t){var n=new R(e,(function(e,t){return!1}));return t.forEach((function(e){var t=Object(l.a)(e,2),c=t[0],r=t[1];n.grid[c][r]=!0})),n}(e.size,r),o=r.length;o>0;){var u=B(e,a,i);if(!u.succeed)break;var f=u;o-=1,a=[].concat(Object(s.a)(a),Object(s.a)(f.segments),[f.connectedPin]);var j=Object(l.a)(f.connectedPin,2),d=j[0],b=j[1];i.grid[d][b]=!1}return o>0?{succeed:!1}:{succeed:!0,connection:{netID:t.netID,segments:a}}}function G(e,t,n){var c=new R(e.size,(function(e,t){return!1}));return e.walls.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];c.grid[n][r]=!0})),e.nets.filter((function(e){return e.netID!==t})).forEach((function(e){e.pins.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];c.grid[n][r]=!0}))})),n.forEach((function(e){e.segments.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];c.grid[n][r]=!0}))})),c}!function(e){e[e.Succeed=0]="Succeed",e[e.FailNet=1]="FailNet",e[e.FailAll=2]="FailAll"}(H||(H={}));var K,L=n(48),Q=n.n(L);function T(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){return Q.a.get("benchmarks/infiles.json").then((function(e){i(e.data)})),function(){}}),[]);var o=Object(r.useState)("impossible.infile"),s=Object(l.a)(o,2),u=s[0],f=s[1];return Object(r.useEffect)((function(){""!==u&&Q.a.get("benchmarks/".concat(u)).then((function(t){e(function(e){var t=e.split("\n"),n=t[0].split(" ").map((function(e){return parseInt(e)})),c=Object(l.a)(n,2),r=c[0],a=c[1],i=1,o=parseInt(t[i++]),s=t.slice(i,i+o).map((function(e){var t=e.split(" ").map((function(e){return parseInt(e)})),n=Object(l.a)(t,2),c=n[0];return[n[1],c]}));i+=o;var u=[],f=parseInt(t[i++]);return t.slice(i,i+f).forEach((function(e,t){for(var n=e.trim().split(" ").map((function(e){return parseInt(e)})),c=Object(M.a)(n).slice(1),r={netID:t,pins:[]},a=0;a<c.length;a+=2){var i=c[a],o=c[a+1];r.pins.push([o,i])}u.push(r)})),{size:{col:r,row:a},walls:s,nets:u}}(t.data))}))}),[u,e]),{routeMapSelector:Object(c.jsx)(j.a,{children:null===a||void 0===a?void 0:a.map((function(e){return Object(c.jsx)(d.a,{button:!0,onClick:function(){return f(e)},selected:e===u,children:e.split(".")[0]},e)}))}),mapName:u}}function U(e,t){var n=new R(e,(function(e,t){return{netId:-1}}));return t.forEach((function(e){e.segments.forEach((function(t){var c=Object(l.a)(t,2),r=c[0],a=c[1];n.grid[r][a].netId=e.netID}))})),n}!function(e){e[e.void=0]="void",e[e.wall=1]="wall",e[e.pin=2]="pin"}(K||(K={}));var V=150,X=Object(u.a)((function(e){return Object(f.a)({root:{display:"flex"},appBar:{width:"calc(100% - ".concat(V,"px - ").concat(150,"px)"),left:V},circuitDrawer:{width:V,flexShrink:0},circuitDrawerPaper:{width:V},historyDrawer:{width:150},historyDrawerPaper:{width:150,flexShrink:0},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}})}));var Y=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),o=Object(l.a)(i,2),u=o[0],f=o[1],x=X(),y=T(f),w=y.routeMapSelector,N=y.mapName,D=Object(r.useState)([]),S=Object(l.a)(D,2),k=S[0],E=S[1],C=function(e){E((function(t){return t.length>100?t:[].concat(Object(s.a)(t),[e])}))},z=Object(r.useState)(),R=Object(l.a)(z,2),M=R[0],W=R[1];Object(r.useEffect)((function(){if(u){W(void 0),E([]);var e=function(e,t){return function n(c,r){if(0===c.length)return{succeed:!0,netRouteSequence:[],connections:[]};for(var a=0;a<c.length;a++){var i=c[a],o=J(G(e,a,r),i);if(o.succeed){var l=o;t({type:H.Succeed,connectionHistory:r,newConnection:l.connection});var u=n([].concat(Object(s.a)(c.slice(0,a)),Object(s.a)(c.slice(a+1))),[].concat(Object(s.a)(r),[l.connection]));if(u.succeed){var f=u;return{succeed:!0,netRouteSequence:[i].concat(Object(s.a)(f.netRouteSequence)),connections:[l.connection].concat(Object(s.a)(f.connections))}}}else t({type:H.FailNet,connectionHistory:r,failedNet:i})}return t({type:H.FailAll,connectionHistory:r}),{succeed:!1}}(e.nets,[])}(u,C);if(e.succeed){var t=e;console.log(t);var n=U(u.size,t.connections);a(n)}else a(void 0)}}),[u]),Object(r.useEffect)((function(){if(u&&M)switch(M.type){case H.Succeed:var e=M,t=U(u.size,[].concat(Object(s.a)(e.connectionHistory),[e.newConnection]));a(t);break;case H.FailNet:var n=M,c=U(u.size,n.connectionHistory);a(c);break;case H.FailAll:break;default:console.error("should not reach here")}}),[M]);var q=Object(c.jsx)(j.a,{children:k.map((function(e,t){return Object(c.jsx)(d.a,{button:!0,onClick:function(){return W(e)},selected:e===M,children:function(){switch(e.type){case H.Succeed:return Object(c.jsx)(F,{result:e});case H.FailNet:return Object(c.jsx)(A,{result:e});case H.FailAll:return Object(c.jsx)(P,{result:e});default:return"0"}}()},"history ".concat(t))}))});return Object(c.jsxs)("div",{className:x.root,children:[Object(c.jsx)(b.a,{}),Object(c.jsxs)(O.a,{theme:g,children:[Object(c.jsx)(h.a,{position:"fixed",className:x.appBar,children:Object(c.jsxs)(v.a,{children:[" ",Object(c.jsx)(p.a,{variant:"h6",noWrap:!0,children:N})]})}),Object(c.jsx)(m.a,{open:!0,variant:"permanent",className:x.circuitDrawer,classes:{paper:x.circuitDrawerPaper},children:w}),Object(c.jsxs)("main",{className:x.content,children:[Object(c.jsx)("div",{className:x.toolbar}),u?Object(c.jsx)(I,{routeMap:u,routeResult:n}):Object(c.jsx)(c.Fragment,{})]}),Object(c.jsx)(m.a,{open:!0,variant:"permanent",className:x.historyDrawer,classes:{paper:x.historyDrawerPaper},anchor:"right",children:q})]})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Y,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.eabe195a.chunk.js.map