(this.webpackJsonpa1=this.webpackJsonpa1||[]).push([[0],{86:function(e,n,t){},87:function(e,n,t){},90:function(e,n,t){"use strict";t.r(n);var c=t(4),r=t(0),a=t.n(r),i=t(8),o=t.n(i),s=t(5),u=t(44),l=t.n(u),f=t(114),d=t(124),j=t(115),b=t(123),v=t(117),O=t(118),p=t(119),h=t(120),g=t(121),m=t(122),w=t(113),x=Object(w.a)({palette:{primary:{main:"#203040"},secondary:{main:"#abc"}}}),I=(t(86),t(35));t(87);function E(e){var n=Array(e.size.row).fill(null).map((function(n,t){return Array(e.size.col).fill(null).map((function(e,n){return{isWall:!1,isPin:!1,netID:-1}}))}));return e.walls.forEach((function(e){var t=Object(s.a)(e,2),c=t[0],r=t[1];n[c][r].isWall=!0})),e.nets.forEach((function(e){e.pins.forEach((function(t){var c=Object(s.a)(t,2),r=c[0],a=c[1];n[r][a].isPin=!0,n[r][a].netID=e.netID}))})),n}function y(e){var n=e.routeMap,t=e.routeResult,a=Object(r.useState)((function(){return E(n)})),i=Object(s.a)(a,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){u(E(n))}),[n]),Object(c.jsx)("div",{children:o.map((function(e,n){return Object(c.jsx)("div",{className:"grid-row",children:e.map((function(e,r){return Object(c.jsx)(z,{mapCell:e,routeResultCell:null===t||void 0===t?void 0:t.grid[n][r]},"grid-cell ".concat(n," ").concat(r))}))},"grid-row ".concat(n))}))})}var k=["#ff6347","#adff2f","#4682b4","#F4A460","#dda0dd","#6a5acd","#00ff7f"];function z(e){var n=e.mapCell,t=e.routeResultCell,r="#ccc";return n.isWall?r="black":n.isPin&&(r=k[n.netID]),t&&-1!==t.netId&&(r=k[t.netId]),Object(c.jsx)("div",{className:"grid-cell",style:{backgroundColor:r}})}var S,D=t(36);!function(e){e[e.void=0]="void",e[e.wall=1]="wall",e[e.pin=2]="pin"}(S||(S={}));var P=t(18),C=t(42),N=function e(n,t){Object(I.a)(this,e),this.grid=void 0,this.size=void 0,this.size=n,this.grid=Array(n.row).fill(null).map((function(e,c){return Array(n.col).fill(null).map((function(e,n){return t(c,n)}))}))};function R(e,n){return[[e+1,n],[e-1,n],[e,n+1],[e,n-1]]}function A(e,n,t){for(var c=e.size,r=c.col,a=c.row,i=new N(e.size,(function(e,n){return-1})),o=function(e,n){return e>=0&&e<a&&n>=0&&n<r},u=function(n,t){return o(n,t)&&!e.grid[n][t]&&-1===i.grid[n][t]},l=n,f=0,d=null;l.length>0;){var j,b=[],v=Object(C.a)(l);try{for(v.s();!(j=v.n()).done;){var O=Object(s.a)(j.value,2),p=O[0],h=O[1];i.grid[p][h]=f}}catch(J){v.e(J)}finally{v.f()}var g,m=Object(C.a)(l);try{for(m.s();!(g=m.n()).done;){var w,x=Object(s.a)(g.value,2),I=x[0],E=x[1],y=Object(C.a)(R(I,E));try{for(y.s();!(w=y.n()).done;){var k=Object(s.a)(w.value,2),z=k[0],S=k[1];u(z,S)&&(b.push([z,S]),i.grid[z][S]=-2,t.grid[z][S]&&(d=[z,S]))}}catch(J){y.e(J)}finally{y.f()}}}catch(J){m.e(J)}finally{m.f()}d?l=[]:(l=b,f++)}if(!d)return{succeed:!1};for(var D=f,P=d,A=Object(s.a)(P,2),W=A[0],q=A[1],B=D,M=[];;){var F=Object(s.a)(R(W,q).filter((function(e){var n=Object(s.a)(e,2),t=n[0],c=n[1];return o(t,c)&&i.grid[t][c]===B}))[0],2);if(W=F[0],q=F[1],0===i.grid[W][q])break;M.push([W,q]),B--}return{succeed:!0,segments:M,connectedPin:d}}function W(e,n){for(var t=Object(D.a)(n.pins),c=t[0],r=t.slice(1),a=[c],i=function(e,n){var t=new N(e,(function(e,n){return!1}));return n.forEach((function(e){var n=Object(s.a)(e,2),c=n[0],r=n[1];t.grid[c][r]=!0})),t}(e.size,r),o=r.length;o>0;){var u=A(e,a,i);if(!u.succeed)break;var l=u;o-=1,a=[].concat(Object(P.a)(a),Object(P.a)(l.segments),[l.connectedPin]);var f=Object(s.a)(l.connectedPin,2),d=f[0],j=f[1];i.grid[d][j]=!1}return o>0?{succeed:!1}:{succeed:!0,connection:{netID:n.netID,segments:a}}}function q(e,n,t){var c=new N(e.size,(function(e,n){return!1}));return e.walls.forEach((function(e){var n=Object(s.a)(e,2),t=n[0],r=n[1];c.grid[t][r]=!0})),e.nets.filter((function(e){return e.netID!==n})).forEach((function(e){e.pins.forEach((function(e){var n=Object(s.a)(e,2),t=n[0],r=n[1];c.grid[t][r]=!0}))})),t.forEach((function(e){e.segments.forEach((function(e){var n=Object(s.a)(e,2),t=n[0],r=n[1];c.grid[t][r]=!0}))})),c}var B=150,M=Object(f.a)((function(e){return Object(d.a)({root:{display:"flex"},appBar:{width:"calc(100% - ".concat(B,"px)"),marginLeft:B},drawer:{width:B,flexShrink:0},drawerPaper:{width:B},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}})}));var F=function(){var e=Object(r.useState)(),n=Object(s.a)(e,2),t=n[0],a=n[1],i=Object(r.useState)(),o=Object(s.a)(i,2),u=o[0],f=o[1],d=M();Object(r.useEffect)((function(){if(u){var e=function(e){return function n(t,c){if(0===t.length)return{succeed:!0,netRouteSequence:[],connections:[]};for(var r=0;r<t.length;r++){var a=t[r],i=W(q(e,r,c),a);if(!i.succeed)return{succeed:!1};var o=i,s=n([].concat(Object(P.a)(t.slice(0,r)),Object(P.a)(t.slice(r+1))),[].concat(Object(P.a)(c),[o.connection]));if(s.succeed){var u=s;return{succeed:!0,netRouteSequence:[a].concat(Object(P.a)(u.netRouteSequence)),connections:[o.connection].concat(Object(P.a)(u.connections))}}}return{succeed:!1}}(e.nets,[])}(u);if(e.succeed){var n=e;console.log(n);var t=new N(u.size,(function(e,n){return{netId:-1}}));n.connections.forEach((function(e){e.segments.forEach((function(n){var c=Object(s.a)(n,2),r=c[0],a=c[1];t.grid[r][a].netId=e.netID}))})),a(t)}else a(void 0)}}),[u]);var w=Object(r.useState)(),I=Object(s.a)(w,2),E=I[0],k=I[1];Object(r.useEffect)((function(){return l.a.get("benchmarks/infiles.json").then((function(e){k(e.data)})),function(){}}),[]);var z=Object(r.useState)("impossible.infile"),S=Object(s.a)(z,2),C=S[0],R=S[1];Object(r.useEffect)((function(){""!==C&&l.a.get("benchmarks/".concat(C)).then((function(e){f(function(e){var n=e.split("\n"),t=n[0].split(" ").map((function(e){return parseInt(e)})),c=Object(s.a)(t,2),r=c[0],a=c[1],i=1,o=parseInt(n[i++]),u=n.slice(i,i+o).map((function(e){var n=e.split(" ").map((function(e){return parseInt(e)})),t=Object(s.a)(n,2),c=t[0];return[t[1],c]}));i+=o;var l=[],f=parseInt(n[i++]);return n.slice(i,i+f).forEach((function(e,n){for(var t=e.trim().split(" ").map((function(e){return parseInt(e)})),c=Object(D.a)(t).slice(1),r={netID:n,pins:[]},a=0;a<c.length;a+=2){var i=c[a],o=c[a+1];r.pins.push([o,i])}l.push(r)})),{size:{col:r,row:a},walls:u,nets:l}}(e.data))}))}),[C]);var A=Object(c.jsx)(j.a,{children:null===E||void 0===E?void 0:E.map((function(e){return Object(c.jsx)(b.a,{button:!0,onClick:function(){return R(e)},selected:e===C,children:e.split(".")[0]},e)}))});return Object(c.jsxs)("div",{className:d.root,children:[Object(c.jsx)(v.a,{}),Object(c.jsxs)(O.a,{theme:x,children:[Object(c.jsx)(p.a,{position:"fixed",className:d.appBar,children:Object(c.jsxs)(h.a,{children:[" ",Object(c.jsx)(g.a,{variant:"h6",noWrap:!0,children:C})]})}),Object(c.jsx)(m.a,{open:!0,variant:"permanent",className:d.drawer,classes:{paper:d.drawerPaper},children:A}),Object(c.jsxs)("main",{className:d.content,children:[Object(c.jsx)("div",{className:d.toolbar}),u?Object(c.jsx)(y,{routeMap:u,routeResult:t}):Object(c.jsx)(c.Fragment,{})]})]})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.d7b56514.chunk.js.map